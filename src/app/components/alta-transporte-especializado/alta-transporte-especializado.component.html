<app-nav></app-nav>
<div class="contenedor-principal">
  <div class="container py-5 mx-auto">
    <div class="row d-flex justify-content-center">
      <div class="fondo-contenedor-principal rounded">
        <br />
        <div class="d-grid gap-1 d-md-flex fondo-stepper-encabezado rounded">
          <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded"><span><i
                class="bi bi-people-fill"></i>&nbsp;PERSONA: {{ esPersonaFisica ? 'FÍSICA' : 'MORAL' }} </span>
          </h6>
          <div>
            <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded"><span><i
                  class="bi bi-bus-front"></i>&nbsp;REVISTA VEHÍCULAR ALTA DE VEHÍCULOS NUEVOS TRANSPORTE
                ESPECIALIZADO</span>
            </h6>
          </div>
        </div>
        <mat-vertical-stepper [linear]="false" #stepper animationDuration="1500"
          class="fondo-stepper rounded mat-stepper-vertical">
          <!-- Step 1 - DATOS DE LA FACTURA -->
          <mat-step [stepControl]="datosConcesionForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-bus-front stepper-icons"></span>
                <span> DATOS DE LA FACTURA </span>
              </h6>
            </ng-template>
            <form [formGroup]="datosConcesionForm">
              <div class="row g-3">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strNiv" class="form-label">NIV <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input appAlphanumeric type="text" minlength="17" maxlength="17" id="strNiv"
                      placeholder="Escribe NIV" formControlName="strNiv" name="strNiv" autocomplete="off"
                      class="form-control" [ngClass]="{
             'is-invalid': datosConcesionForm.get('strNiv')?.invalid && (datosConcesionForm.get('strNiv')?.touched || datosConcesionForm.get('strNiv')?.dirty), 
             'is-valid': datosConcesionForm.get('strNiv')?.valid && (datosConcesionForm.get('strNiv')?.touched || datosConcesionForm.get('strNiv')?.dirty),
              }" />
                    <div class="invalid-feedback"
                      *ngIf="datosConcesionForm.get('strNiv')?.invalid && (datosConcesionForm.get('strNiv')?.touched || datosConcesionForm.get('strNiv')?.dirty)">
                      <ng-container *ngIf="datosConcesionForm.get('strNiv')?.hasError('required')"> Campo Obligatorio
                      </ng-container>
                      <ng-container *ngIf="datosConcesionForm.get('strNiv')?.hasError('minlength')"> Debe tener al menos
                        17 caracteres </ng-container>
                      <ng-container *ngIf="datosConcesionForm.get('strNiv')?.hasError('maxlength')"> No puede tener más
                        de 17 caracteres </ng-container>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strCveVeh" class="form-label">CLAVE VEHICULAR<b class="asteriscos">*</b></label>
                  <input type="text" formControlName="strCveVeh" id="strCveVeh" name="strCveVeh" autocomplete="off"
                    class="form-control" [matAutocomplete]="auto" (input)="filtrarOpciones($event)" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strCveVeh')?.invalid && (datosConcesionForm.get('strCveVeh')?.touched || datosConcesionForm.get('strCveVeh')?.dirty), 
            'is-valid': datosConcesionForm.get('strCveVeh')?.valid && (datosConcesionForm.get('strCveVeh')?.touched || datosConcesionForm.get('strCveVeh')?.dirty),
             }">
                  <mat-autocomplete #auto="matAutocomplete">
                    <mat-option *ngFor="let opcion of opcCveVehFiltradas.slice(0,3)"
                      [value]="opcion.strClaveVehicular + '-' + opcion.strEmpresa + '-' + opcion.strModelo ">
                      {{ opcion.strClaveVehicular }} - {{ opcion.strEmpresa }} - {{ opcion.strModelo }}
                    </mat-option>
                  </mat-autocomplete>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strMotor" class="form-label">NÚMERO DE MOTOR <b class="asteriscos">*</b></label>
                  <input type="text" minlength="1" maxlength="20" formControlName="strMotor" id="strMotor"
                    name="strMotor" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strMotor')?.invalid && (datosConcesionForm.get('strMotor')?.touched || datosConcesionForm.get('strMotor')?.dirty), 
            'is-valid': datosConcesionForm.get('strMotor')?.valid && (datosConcesionForm.get('strMotor')?.touched || datosConcesionForm.get('strMotor')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strMotor')?.invalid && (datosConcesionForm.get('strMotor')?.touched || datosConcesionForm.get('strMotor')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strMotor')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strMarca" class="form-label">MARCA <b class="asteriscos">*</b></label><input type="text"
                    formControlName="strMarca" id="strMarca" name="strMarca" autocomplete="off" class="form-control"
                    [ngClass]="{
            'is-invalid': datosConcesionForm.get('strMarca')?.invalid && (datosConcesionForm.get('strMarca')?.touched || datosConcesionForm.get('strMarca')?.dirty), 
            'is-valid': datosConcesionForm.get('strMarca')?.valid && (datosConcesionForm.get('strMarca')?.touched || datosConcesionForm.get('strMarca')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strMarca')?.invalid && (datosConcesionForm.get('strMarca')?.touched || datosConcesionForm.get('strMarca')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strMarca')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="intModelo" class="form-label">MODELO <b class="asteriscos">*</b></label><input appNumeric
                    type="text" minlength="1" maxlength="4" formControlName="intModelo" id="intModelo" name="intModelo"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('intModelo')?.invalid && (datosConcesionForm.get('intModelo')?.touched || datosConcesionForm.get('intModelo')?.dirty), 
            'is-valid': datosConcesionForm.get('intModelo')?.valid && (datosConcesionForm.get('intModelo')?.touched || datosConcesionForm.get('intModelo')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('intModelo')?.invalid && (datosConcesionForm.get('intModelo')?.touched || datosConcesionForm.get('intModelo')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('intModelo')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strTipoVeh" class="form-label">TIPO<b class="asteriscos">*</b> </label><input type="text"
                    formControlName="strTipoVeh" id="strTipoVeh" name="strTipoVeh" autocomplete="off"
                    class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strTipoVeh')?.invalid && (datosConcesionForm.get('strTipoVeh')?.touched || datosConcesionForm.get('strTipoVeh')?.dirty), 
            'is-valid': datosConcesionForm.get('strTipoVeh')?.valid && (datosConcesionForm.get('strTipoVeh')?.touched || datosConcesionForm.get('strTipoVeh')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strTipoVeh')?.invalid && (datosConcesionForm.get('strTipoVeh')?.touched || datosConcesionForm.get('strTipoVeh')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strTipoVeh')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intCapacidad" class="form-label">CAPACIDAD<b class="asteriscos">*</b> </label><input
                    type="text" minlength="2" maxlength="4" formControlName="intCapacidad" id="intCapacidad"
                    name="intCapacidad" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('intCapacidad')?.invalid && (datosConcesionForm.get('intCapacidad')?.touched || datosConcesionForm.get('intCapacidad')?.dirty), 
            'is-valid': datosConcesionForm.get('intCapacidad')?.valid && (datosConcesionForm.get('intCapacidad')?.touched || datosConcesionForm.get('intCapacidad')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('intCapacidad')?.invalid && (datosConcesionForm.get('intCapacidad')?.touched || datosConcesionForm.get('intCapacidad')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('intCapacidad')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intCilindros" class="form-label">CILINDROS<b class="asteriscos">*</b> </label>
                  <input appNumeric type="number" formControlName="intCilindros" id="intCilindros" name="intCilindros"
                    class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('intCilindros')?.invalid && (datosConcesionForm.get('intCilindros')?.touched || datosConcesionForm.get('intCilindros')?.dirty), 
            'is-valid': datosConcesionForm.get('intCilindros')?.valid && (datosConcesionForm.get('intCilindros')?.touched || datosConcesionForm.get('intCilindros')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('intCilindros')?.invalid && (datosConcesionForm.get('intCilindros')?.touched || datosConcesionForm.get('intCilindros')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('intCilindros')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strCombustible" class="form-label">COMBUSTIBLE <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" maxlength="4" formControlName="strCombustible" id="strCombustible"
                    name="strCombustible" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strCombustible')?.invalid && (datosConcesionForm.get('strCombustible')?.touched || datosConcesionForm.get('strCombustible')?.dirty), 
            'is-valid': datosConcesionForm.get('strCombustible')?.valid && (datosConcesionForm.get('strCombustible')?.touched || datosConcesionForm.get('strCombustible')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strCombustible')?.invalid && (datosConcesionForm.get('strCombustible')?.touched || datosConcesionForm.get('strCombustible')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strCombustible')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strColor" class="form-label">COLOR<b class="asteriscos">*</b> </label><input type="text"
                    minlength="4" formControlName="strColor" id="strColor" name="strColor" autocomplete="off"
                    class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strColor')?.invalid && (datosConcesionForm.get('strColor')?.touched || datosConcesionForm.get('strColor')?.dirty), 
            'is-valid': datosConcesionForm.get('strColor')?.valid && (datosConcesionForm.get('strColor')?.touched || datosConcesionForm.get('strColor')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strColor')?.invalid && (datosConcesionForm.get('strColor')?.touched || datosConcesionForm.get('strColor')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strColor')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intPuertas" class="form-label">PUERTAS <b class="asteriscos">*</b></label><input
                    appNumeric type="text" maxlength="4" formControlName="intPuertas" id="intPuertas" name="intPuertas"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('intPuertas')?.invalid && (datosConcesionForm.get('intPuertas')?.touched || datosConcesionForm.get('intPuertas')?.dirty), 
            'is-valid': datosConcesionForm.get('intPuertas')?.valid && (datosConcesionForm.get('intPuertas')?.touched || datosConcesionForm.get('intPuertas')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('intPuertas')?.invalid && (datosConcesionForm.get('intPuertas')?.touched || datosConcesionForm.get('intPuertas')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('intPuertas')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strUnidadMedida" class="form-label">UNIDAD DE MEDIDA<b class="asteriscos">*</b>
                  </label><input type="text" minlength="4" formControlName="strUnidadMedida" id="strUnidadMedida"
                    name="strUnidadMedida" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strUnidadMedida')?.invalid && (datosConcesionForm.get('strUnidadMedida')?.touched || datosConcesionForm.get('strUnidadMedida')?.dirty), 
            'is-valid': datosConcesionForm.get('strUnidadMedida')?.valid && (datosConcesionForm.get('strUnidadMedida')?.touched || datosConcesionForm.get('strUnidadMedida')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strUnidadMedida')?.invalid && (datosConcesionForm.get('strUnidadMedida')?.touched || datosConcesionForm.get('strUnidadMedida')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strUnidadMedida')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strEntFed" class="form-label">ENTIDAD FEDERATIVA <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" formControlName="strEntFed" id="strEntFed" name="strEntFed"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strEntFed')?.invalid && (datosConcesionForm.get('strEntFed')?.touched || datosConcesionForm.get('strEntFed')?.dirty), 
            'is-valid': datosConcesionForm.get('strEntFed')?.valid && (datosConcesionForm.get('strEntFed')?.touched || datosConcesionForm.get('strEntFed')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strEntFed')?.invalid && (datosConcesionForm.get('strEntFed')?.touched || datosConcesionForm.get('strEntFed')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strEntFed')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="dtFechaFact" class="form-label">FECHA DE LA FACTURA <b
                      class="asteriscos">*</b></label><input type="text" minlength="4" formControlName="dtFechaFact"
                    id="dtFechaFact" name="dtFechaFact" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('dtFechaFact')?.invalid && (datosConcesionForm.get('dtFechaFact')?.touched || datosConcesionForm.get('dtFechaFact')?.dirty), 
            'is-valid': datosConcesionForm.get('dtFechaFact')?.valid && (datosConcesionForm.get('dtFechaFact')?.touched || datosConcesionForm.get('dtFechaFact')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('dtFechaFact')?.invalid && (datosConcesionForm.get('dtFechaFact')?.touched || datosConcesionForm.get('dtFechaFact')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('dtFechaFact')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strNoFact" class="form-label">NO. FACTURA <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" formControlName="strNoFact" id="strNoFact" name="strNoFact"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strNoFact')?.invalid && (datosConcesionForm.get('strNoFact')?.touched || datosConcesionForm.get('strNoFact')?.dirty), 
            'is-valid': datosConcesionForm.get('strNoFact')?.valid && (datosConcesionForm.get('strNoFact')?.touched || datosConcesionForm.get('strNoFact')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strNoFact')?.invalid && (datosConcesionForm.get('strNoFact')?.touched || datosConcesionForm.get('strNoFact')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strNoFact')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strImporteFact" class="form-label">IMPORTE DE LA FACTURA <b
                      class="asteriscos">*</b></label><input type="text" minlength="4" formControlName="strImporteFact"
                    id="strImporteFact" name="strImporteFact" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strImporteFact')?.invalid && (datosConcesionForm.get('strImporteFact')?.touched || datosConcesionForm.get('strImporteFact')?.dirty), 
            'is-valid': datosConcesionForm.get('strImporteFact')?.valid && (datosConcesionForm.get('strImporteFact')?.touched || datosConcesionForm.get('strImporteFact')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strImporteFact')?.invalid && (datosConcesionForm.get('strImporteFact')?.touched || datosConcesionForm.get('strImporteFact')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strImporteFact')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strProcedencia" class="form-label">PROCEDENCIA <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" formControlName="strProcedencia" id="strProcedencia" name="strProcedencia"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strProcedencia')?.invalid && (datosConcesionForm.get('strProcedencia')?.touched || datosConcesionForm.get('strProcedencia')?.dirty), 
            'is-valid': datosConcesionForm.get('strProcedencia')?.valid && (datosConcesionForm.get('strProcedencia')?.touched || datosConcesionForm.get('strProcedencia')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strProcedencia')?.invalid && (datosConcesionForm.get('strProcedencia')?.touched || datosConcesionForm.get('strProcedencia')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strProcedencia')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-6">
                  <label for="strAgenciaDist" class="form-label">AGENCIA DISTRIBUIDORA<b class="asteriscos">*</b>
                  </label><input type="text" minlength="4" formControlName="strAgenciaDist" id="strAgenciaDist"
                    name="strAgenciaDist" autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strAgenciaDist')?.invalid && (datosConcesionForm.get('strAgenciaDist')?.touched || datosConcesionForm.get('strAgenciaDist')?.dirty), 
            'is-valid': datosConcesionForm.get('strAgenciaDist')?.valid && (datosConcesionForm.get('strAgenciaDist')?.touched || datosConcesionForm.get('strAgenciaDist')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strAgenciaDist')?.invalid && (datosConcesionForm.get('strAgenciaDist')?.touched || datosConcesionForm.get('strAgenciaDist')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strAgenciaDist')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strTipoServ" class="form-label">TIPO DE SERVICIO <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" formControlName="strTipoServ" id="strTipoServ" name="strTipoServ"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strTipoServ')?.invalid && (datosConcesionForm.get('strTipoServ')?.touched || datosConcesionForm.get('strTipoServ')?.dirty), 
            'is-valid': datosConcesionForm.get('strTipoServ')?.valid && (datosConcesionForm.get('strTipoServ')?.touched || datosConcesionForm.get('strTipoServ')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strTipoServ')?.invalid && (datosConcesionForm.get('strTipoServ')?.touched || datosConcesionForm.get('strTipoServ')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strTipoServ')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strUsoVeh" class="form-label">USO DEL VEHÍCULO <b class="asteriscos">*</b></label><input
                    type="text" minlength="4" formControlName="strUsoVeh" id="strUsoVeh" name="strUsoVeh"
                    autocomplete="off" class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strUsoVeh')?.invalid && (datosConcesionForm.get('strUsoVeh')?.touched || datosConcesionForm.get('strUsoVeh')?.dirty), 
            'is-valid': datosConcesionForm.get('strUsoVeh')?.valid && (datosConcesionForm.get('strUsoVeh')?.touched || datosConcesionForm.get('strUsoVeh')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strUsoVeh')?.invalid && (datosConcesionForm.get('strUsoVeh')?.touched || datosConcesionForm.get('strUsoVeh')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strUsoVeh')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strRepuve" class="form-label">REPUVE <b class="asteriscos">*</b></label><input type="text"
                    minlength="4" formControlName="strRepuve" id="strRepuve" name="strRepuve" autocomplete="off"
                    class="form-control" [ngClass]="{
            'is-invalid': datosConcesionForm.get('strRepuve')?.invalid && (datosConcesionForm.get('strRepuve')?.touched || datosConcesionForm.get('strRepuve')?.dirty), 
            'is-valid': datosConcesionForm.get('strRepuve')?.valid && (datosConcesionForm.get('strRepuve')?.touched || datosConcesionForm.get('strRepuve')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosConcesionForm.get('strRepuve')?.invalid && (datosConcesionForm.get('strRepuve')?.touched || datosConcesionForm.get('strRepuve')?.dirty)">
                    <ng-container *ngIf="datosConcesionForm.get('strRepuve')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
              </div>
              <br />
              <div class="col-12 d-grid gap-1 d-md-flex justify-content-md-end">
                <button (click)="cargarDatosFormulario(datosConcesionForm, 'datosConcesionForm',true)" mat-button
                  matTooltip="Siguiente paso" matTooltipPosition="above" class="text-white boton-siguiente"
                  aria-describedby="cdk-describedby-message-pdb-1-2" cdk-describedby-host="pdb-1">
                  <span class="mdc-button__label">Siguiente
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor"
                      viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg>
                  </span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 2 - DATOS DEL PERMISIONARIO -->
          <mat-step [stepControl]="datosPermisionarioForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-person-vcard stepper-icons"></span>
                <span> DATOS DEL PERMISIONARIO </span>
              </h6>
            </ng-template>
            <form [formGroup]="datosPermisionarioForm">
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strRfc" class="form-label">RFC <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <div class="input-group">
                      <button type="button" class="btn icono bi bi-info-circle-fill"
                        (click)="muestraModalConImagen('strRfc')"></button>
                      <input appAlphanumeric formControlName="strRfc" type="text" id="strRfc" name="strRfc"
                        autocomplete="off" [minlength]="esPersonaFisica ? 13 : 12"
                        [maxlength]="esPersonaFisica ? 13 : 12" [placeholder]="rfcPlaceholder" [matTooltip]="rfcTooltip"
                        matTooltipPosition="above" [ngClass]="{
                          'is-invalid': datosPermisionarioForm.get('strRfc')?.invalid && (datosPermisionarioForm.get('strRfc')?.dirty || datosPermisionarioForm.get('strRfc')?.touched),
                          'is-valid': datosPermisionarioForm.get('strRfc')?.valid 
                          }" class="form-control">
                      <div class="invalid-feedback"
                        *ngIf="datosPermisionarioForm.get('strRfc')?.errors && (datosPermisionarioForm.get('strRfc')?.dirty || datosPermisionarioForm.get('strRfc')?.touched)">
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('required')">Campo
                          Obligatorio</ng-container>
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('minlength')">Debe tener 13
                          caracteres</ng-container>
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('pattern')">Formato
                          inválido</ng-container>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strCurp" class="form-label">CURP </label><input appAlphanumeric formControlName="strCurp"
                    type="text" minlength="18" maxlength="18" id="strCurp" name="strCurp" autocomplete="off"
                    class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCurp')?.invalid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCurp')?.valid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCurp')?.invalid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCurp')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strNombre" class="form-label"> {{ esPersonaFisica ? 'NOMBRE' : 'RAZÓN SOCIAL' }}
                  </label><input appAlphanumeric formControlName="strNombre" type="text" minlength="4" id="strNombre"
                    name="strNombre" autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNombre')?.invalid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNombre')?.valid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNombre')?.invalid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNombre')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strApPaterno" class="form-label">APELLIDO PATERNO </label><input appAlphanumeric
                    formControlName="strApPaterno" type="text" minlength="4" id="strApPaterno" name="strApPaterno"
                    autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strApPaterno')?.invalid && (datosPermisionarioForm.get('strApPaterno')?.touched || datosPermisionarioForm.get('strApPaterno')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strApPaterno')?.valid && (datosPermisionarioForm.get('strApPaterno')?.touched || datosPermisionarioForm.get('strApPaterno')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strApPaterno')?.invalid && (datosPermisionarioForm.get('strApPaterno')?.touched || datosPermisionarioForm.get('strApPaterno')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strApPaterno')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strApMaterno" class="form-label">APELLIDO MATERNO </label><input appAlphanumeric
                    formControlName="strApMaterno" type="text" minlength="4" id="strApMaterno" name="strApMaterno"
                    autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strApMaterno')?.invalid && (datosPermisionarioForm.get('strApMaterno')?.touched || datosPermisionarioForm.get('strApMaterno')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strApMaterno')?.valid && (datosPermisionarioForm.get('strApMaterno')?.touched || datosPermisionarioForm.get('strApMaterno')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strApMaterno')?.invalid && (datosPermisionarioForm.get('strApMaterno')?.touched || datosPermisionarioForm.get(' strApMaterno')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strApMaterno')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-2">
                  <label for="strSexo" class="form-label">SEXO </label><input formControlName="strSexo" type="text"
                    minlength="4" id="strSexo" name="strSexo" autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strSexo')?.invalid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strSexo')?.valid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strSexo')?.invalid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strSexo')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-2">
                  <label for="strFechaNac" class="form-label">FECHA NACIMIENTO </label><input
                    formControlName="strFechaNac" type="text" minlength="4" id="strFechaNac" name="strFechaNac"
                    autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strFechaNac')?.invalid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strFechaNac')?.valid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strFechaNac')?.invalid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strFechaNac')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strCalleProp" class="form-label">CALLE </label><input appAlphanumeric
                    formControlName="strCalleProp" type="text" minlength="4" id="strCalleProp" name="strCalleProp"
                    autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCalleProp')?.invalid && (datosPermisionarioForm.get('strCalleProp')?.touched || datosPermisionarioForm.get('strCalleProp')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCalleProp')?.valid && (datosPermisionarioForm.get('strCalleProp')?.touched || datosPermisionarioForm.get('strCalleProp')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCalleProp')?.invalid && (datosPermisionarioForm.get('strCalleProp')?.touched || datosPermisionarioForm.get('strCalleProp')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCalleProp')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strNumExt" class="form-label">NÚMERO EXTERIOR </label><input appAlphanumeric
                    formControlName="strNumExt" type="text" id="strNumExt" name="strNumExt" autocomplete="off"
                    class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNumExt')?.invalid && (datosPermisionarioForm.get('strNumExt')?.touched || datosPermisionarioForm.get('strNumExt')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNumExt')?.valid && (datosPermisionarioForm.get('strNumExt')?.touched || datosPermisionarioForm.get('strNumExt')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNumExt')?.invalid && (datosPermisionarioForm.get('strNumExt')?.touched || datosPermisionarioForm.get('strNumExt')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNumExt')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strNumInt" class="form-label">NÚMERO INTERIOR </label><input appAlphanumeric
                    formControlName="strNumInt" type="text" id="strNumInt" name="strNumInt" autocomplete="off"
                    class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNumInt')?.invalid && (datosPermisionarioForm.get('strNumInt')?.touched || datosPermisionarioForm.get('strNumInt')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNumInt')?.valid && (datosPermisionarioForm.get('strNumInt')?.touched || datosPermisionarioForm.get('strNumInt')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNumInt')?.invalid && (datosPermisionarioForm.get('strNumInt')?.touched || datosPermisionarioForm.get('strNumInt')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNumInt')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="estado" class="form-label">ESTADO </label><input appAlphanumeric formControlName="estado"
                    type="text" minlength="4" id="estado" name="estado" autocomplete="off" class="form-control"
                    [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('estado')?.invalid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('estado')?.valid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('estado')?.invalid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('estado')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strMunicipio" class="form-label">MUNICIPIO <b class="asteriscos">*</b> </label>
                  <select formControlName="strMunicipio" id="strMunicipio" name="strMunicipio" (focus)="onSelectFocus()"
                    (change)="onSelectChange($event)" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strMunicipio')?.invalid && datosPermisionarioForm.get('strMunicipio')?.touched,
                      'is-valid': datosPermisionarioForm.get('strMunicipio')?.valid && datosPermisionarioForm.get('strMunicipio')?.touched
                    }" class="form-select">
                    <option *ngFor="let municipio of listaMunicipios" [value]="municipio.intIdMunicipio">
                      {{ municipio.strNombreMunicipio }}
                    </option>
                  </select>
                  <div class="invalid-feedback">Campo obligatorio</div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strLocalidad" class="form-label">LOCALIDAD </label>
                  <!-- <input formControlName="strLocalidad"
                    type="text" id="strLocalidad" name="strLocalidad" autocomplete="off" class="form-control"
                    [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strLocalidad')?.invalid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strLocalidad')?.valid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty),
                       }"
                    />  -->
                  <select formControlName="strLocalidad" id="strLocalidad" name="strLocalidad" (focus)="onSelectFocus()"
                    [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strLocalidad')?.invalid && datosPermisionarioForm.get('strLocalidad')?.touched,
                      'is-valid': datosPermisionarioForm.get('strLocalidad')?.valid && datosPermisionarioForm.get('strLocalidad')?.touched
                    }" class="form-select">
                    <option *ngFor="let localidad of listaLocalidades" [value]="localidad.intIdLocalidad">
                      {{ localidad.strNombreLocalidad }}
                    </option>
                  </select>
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strLocalidad')?.invalid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strLocalidad')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strCP" class="form-label">CÓDIGO POSTAL </label><input formControlName="strCP" type="text"
                    id="strCP" name="strCP" autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCP')?.invalid && (datosPermisionarioForm.get('strCP')?.touched || datosPermisionarioForm.get('strCP')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCP')?.valid && (datosPermisionarioForm.get('strCP')?.touched || datosPermisionarioForm.get('strCP')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCP')?.invalid && (datosPermisionarioForm.get('strCP')?.touched || datosPermisionarioForm.get('strCP')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCP')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strColonia" class="form-label">COLONIA </label><input appAlphanumeric
                    formControlName="strColonia" type="text" minlength="4" id="strColonia" name="strColonia"
                    autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strColonia')?.invalid && (datosPermisionarioForm.get('strColonia')?.touched || datosPermisionarioForm.get('strColonia')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strColonia')?.valid && (datosPermisionarioForm.get('strColonia')?.touched || datosPermisionarioForm.get('strColonia')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strColonia')?.invalid && (datosPermisionarioForm.get('strColonia')?.touched || datosPermisionarioForm.get('strColonia')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strColonia')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3 mat-step-label mat-step-label-active mat-step-label-selected">
                <div class="mat-step-text-label ng-star-inserted">
                  <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                    <span class="bi bi-person-lines-fill stepper-icons"></span>
                    <span> MEDIOS DE CONTACTO </span>
                  </h6>
                </div>
              </div>
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTelefonoRepresentante" class="form-label">TELÉFONO REPRESENTANTE <b
                      class="asteriscos">*</b></label>
                  <input appNumeric formControlName="strTelefonoRepresentante" type="text" minlength="10" maxlength="10"
                    matTooltip="Tu número de teléfono debe contener 10 números" matTooltipPosition="above"
                    id="strTelefonoRepresentante" placeholder="Escribe teléfono representante"
                    name="strTelefonoRepresentante" autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strTelefonoRepresentante')?.invalid && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched),
                      'is-valid': datosPermisionarioForm.get('strTelefonoRepresentante')?.valid 
                      }" />
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('required') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    Campo Obligatorio
                  </small>
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('minlength') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    Debe tener 10 números
                  </small>
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('maxlength') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    No puede tener más de 10 números
                  </small>
                </div>

                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strEmail" class="form-label">CORREO <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input type="email" formControlName="strEmail" id="strEmail" [ngClass]="{
                          'is-invalid': datosPermisionarioForm.get('strEmail')?.invalid && (datosPermisionarioForm.get('strEmail')?.dirty || datosPermisionarioForm.get('strEmail')?.touched),
                          'is-valid': datosPermisionarioForm.get('strEmail')?.valid 
                          }" placeholder="Escribe tu correo electrónico" name="strEmail"
                      matTooltip="Formato correo: nombre@ejemplo.com" matTooltipPosition="above" class="form-control" />
                    <i class="fa fa-check"></i>
                    <small
                      *ngIf="datosPermisionarioForm.get('strEmail')?.hasError('required') && (datosPermisionarioForm.get('strEmail')?.dirty || datosPermisionarioForm.get('strEmail')?.touched)"
                      class="text-danger error-message">
                      Campo Obligatorio
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strEmail')?.hasError('email') && (datosPermisionarioForm.get('strEmail')?.dirty || datosPermisionarioForm.get('strEmail')?.touched)"
                      class="text-danger error-message">
                      Correo electrónico inválido
                    </small>
                  </div>
                </div>

                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTelefonoContacto" class="form-label">TELÉFONO CONCESIONARIO <b
                      class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input appNumeric formControlName="strTelefonoContacto" name="strTelefonoContacto" type="text"
                      minlength="10" maxlength="10" matTooltip="Tu número de teléfono debe contener 10 números"
                      matTooltipPosition="above" id="strTelefonoContacto" placeholder="Escribe teléfono concesionario"
                      autocomplete="off" class="form-control" [ngClass]="{
                        'is-invalid': datosPermisionarioForm.get('strTelefonoContacto')?.invalid && (datosPermisionarioForm.get('strTelefonoContacto')?.dirty || datosPermisionarioForm.get('strTelefonoContacto')?.touched),
                        'is-valid': datosPermisionarioForm.get('strTelefonoContacto')?.valid 
                        }" />
                    <i class="fa fa-check"></i>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoContacto')?.hasError('required') && (datosPermisionarioForm.get('strTelefonoContacto')?.dirty || datosPermisionarioForm.get('strTelefonoContacto')?.touched)"
                      class="text-danger error-message">
                      Campo Obligatorio
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoContacto')?.hasError('minlength') && (datosPermisionarioForm.get('strTelefonoContacto')?.dirty || datosPermisionarioForm.get('strTelefonoContacto')?.touched)"
                      class="text-danger error-message">
                      Debe tener 10 números
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoContacto')?.hasError('maxlength') && (datosPermisionarioForm.get('strTelefonoContacto')?.dirty || datosPermisionarioForm.get('strTelefonoContacto')?.touched)"
                      class="text-danger error-message">
                      No puede tener más de 10 números
                    </small>
                  </div>
                </div>
              </div>
              <br />
              <div class="d-flex bd-highlight mb-3">
                <button mat-button matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-5" cdk-describedby-host="ewh-1" type="button"><span
                    class="mdc-button__label"></span><span class="mdc-button__label"><svg
                      xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" viewBox="0 0 16 17"
                      class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg> Regresar</span></button>
                <button (click)="cargarDatosFormulario(datosPermisionarioForm, 'datosPermisionarioForm',true)"
                  mat-button matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-2" cdk-describedby-host="ewh-1">
                  <span class="mdc-button__label">Siguiente <svg xmlns="http://www.w3.org/2000/svg" width="17"
                      height="17" fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg></span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 3 - TIPO TRÁMITE -->
          <mat-step [stepControl]="tramiteForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-receipt stepper-icons"></span>
                <span> TIPO TRÁMITE </span>
              </h6>
            </ng-template>
            <form [formGroup]="tramiteForm">
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTramite" class="form-label">TIPO REVISTA <b class="asteriscos">*</b></label>
                  <select formControlName="strTramite" id="strTramite" name="strTramite" (focus)="onSelectFocus()"
                    (change)="onSelectChange($event)" [ngClass]="{
                      'is-invalid': tramiteForm.get('strTramite')?.invalid && tramiteForm.get('strTramite')?.touched,
                      'is-valid': tramiteForm.get('strTramite')?.valid && tramiteForm.get('strTramite')?.touched
                    }" class="form-select">
                    <option value="" disabled selected> Seleccione una opción</option>
                    <option value="10" selected> PERMISO DE TRANSPORTE ESPECIALIZADO DE PERSONAL</option>
                    <option value="11" selected> PERMISO DE TRANSPORTE ESPECIALIZADO ESCOLAR</option>
                  </select>
                  <div class="invalid-feedback">Campo obligatorio</div>
                </div>
              </div>
              <br />
              <div class="d-flex bd-highlight mb-3">
                <button mat-button matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-5" cdk-describedby-host="ewh-1" type="button"><span
                    class="mdc-button__label"></span><span class="mdc-button__label"><svg
                      xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" viewBox="0 0 16 17"
                      class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg> Regresar</span></button>
                <button (click)="cargarDatosFormulario(tramiteForm, 'tramiteForm',true)" mat-button
                  matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-2" cdk-describedby-host="ewh-1">
                  <span class="mdc-button__label">Siguiente <svg xmlns="http://www.w3.org/2000/svg" width="17"
                      height="17" fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg></span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 4 - DOCUMENTOS DE LA UNIDAD  -->
          <mat-step [stepControl]="documentosUnidadForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-file-earmark-pdf stepper-icons"></span>
                <span> DOCUMENTOS DE LA UNIDAD </span>
              </h6>
            </ng-template>
            <form [formGroup]="documentosUnidadForm"><br><br>
              <div class="container alert terminos shadow-lg rounded">
                <div class="row g-3 justify-content-center">
                  <p> Adjunta los documentos solicitados en formato <b>.pdf</b><br> Has uso de las herramientas <svg
                      matTooltip="Seleccionar Documento" matTooltipPosition="left" xmlns="http://www.w3.org/2000/svg"
                      width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
                      class="mat-mdc-tooltip-trigger bi bi-upload buton-subir-archivo"
                      aria-describedby="cdk-describedby-message-bxa-1-9" cdk-describedby-host="bxa-1">
                      <path
                        d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5">
                      </path>
                      <path
                        d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z">
                      </path>
                    </svg> para adjuntar un documento y de <svg matTooltip="Ver Documento" matTooltipPosition="below"
                      xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
                      class="mat-mdc-tooltip-trigger bi bi-eyeglasses buton-ver-archivo"
                      aria-describedby="cdk-describedby-message-bxa-1-10" cdk-describedby-host="bxa-1">
                      <path
                        d="M4 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4m2.625.547a3 3 0 0 0-5.584.953H.5a.5.5 0 0 0 0 1h.541A3 3 0 0 0 7 8a1 1 0 0 1 2 0 3 3 0 0 0 5.959.5h.541a.5.5 0 0 0 0-1h-.541a3 3 0 0 0-5.584-.953A1.993 1.993 0 0 0 8 6c-.532 0-1.016.208-1.375.547M14 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0">
                      </path>
                    </svg> para visualizar el documento seleccionado. </p>
                </div>
              </div>
              <!-- <div class="row justify-content-center "> -->
              <div class="cards-container d-grid justify-content-center">
                <!-- ACTUALMENTE NO SE USARIA EL *ngIf porque si no no se mostraria ningun archivo -->
                <app-card-pdf [pdfUrl]="pdfUrls['solicitudTitular']"
                  [title]="'SOLICITUD DIRIGIDA AL TITULAR DE LA SMyT'" [controlName]="'solicitudTitular'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['solicitudTitular']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['convenioEmpresa']" [title]="'CONVENIO ACTUALIZADO CON LA EMPRESA'"
                  [controlName]="'convenioEmpresa'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['convenioEmpresa']" [esModificado]="esModificacion">
                </app-card-pdf>

                <!-- <app-card-pdf *ngIf="esPolizaVis" [pdfUrl]="pdfUrls['poliza']" [title]="'POLIZA SEGURO'" -->
                <app-card-pdf [pdfUrl]="pdfUrls['poliza']" [title]="'POLIZA DE SEGURO'" [controlName]="'poliza'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['poliza']" [esModificado]="esModificacion">
                </app-card-pdf>


                <app-card-pdf [pdfUrl]="pdfUrls['ultimoPermiso']" [title]="'ÚLTIMO PERMISO'"
                  [controlName]="'ultimoPermiso'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['ultimoPermiso']" [esModificado]="esModificacion">
                </app-card-pdf>

                <!-- <app-card-pdf *ngIf="esTarjetaCirculacionVis" [pdfUrl]="pdfUrls['tarjetaCirculacion']" -->
                <app-card-pdf [pdfUrl]="pdfUrls['tarjetaCirculacion']" [title]="'TARJETA DE CIRCULACIÓN'"
                  [controlName]="'tarjetaCirculacion'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['tarjetaCirculacion']"
                  [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['ultimoPagoRefrendo']" [title]="'ÚLTIMO PAGO DE REFRENDO'"
                  [controlName]="'ultimoPagoRefrendo'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['ultimoPagoRefrendo']"
                  [esModificado]="esModificacion">
                </app-card-pdf>

                <!-- <app-card-pdf *ngIf="esIneVis" [pdfUrl]="pdfUrls['ine']" [title]="'INE'" [controlName]="'ine'" -->
                <app-card-pdf [pdfUrl]="pdfUrls['ine']" [title]="'INE'" [controlName]="'ine'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['ine']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['constanciaFis']" [title]="'CONSTANCIA FISCAL'"
                  [controlName]="'constanciaFis'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['constanciaFis']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['factura']" [title]="'FACTURA / CARTA FACTURA'"
                  [controlName]="'factura'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['factura']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['curp']" [title]="'CURP'" [controlName]="'curp'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['curp']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['comprobanteDom']" [title]="'COMPROBANTE DE DOMICILIO'"
                  [controlName]="'comprobanteDom'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['comprobanteDom']" [esModificado]="esModificacion">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['antPenales']" [title]="'CARTA DE ANTECEDENTES NO PENALES'"
                  [controlName]="'antPenales'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['antPenales']" [esModificado]="esModificacion">
                </app-card-pdf>

              </div>
              <br><br>
              <div class="row g-3  mt-3">
                <div class="row g-3 alert terminos shadow-lg p-3 mb-5 rounded">
                  <br />
                  <figure>
                    <blockquote class="blockquote">
                      <p>
                        Acepto que los servicios que a través de este medio se
                        pagan, se sujeten a los requisitos que las disposiciones
                        fiscales y administrativas señalen para tales efectos y
                        que en caso de no cumplir con aquéllos, quede expedito
                        mi derecho para solicitar la devolución de este pago,
                        conforme a derecho corresponda.
                      </p>
                      <hr />
                    </blockquote>
                  </figure>
                  <label>
                    <input formControlName="aceptaTerminos" type="checkbox" class="form-check-input" />
                    He leído y acepto los
                    <a href="#" (click)="openModal(); $event.preventDefault()">
                      Términos y condiciones
                    </a>

                  </label>
                </div>
              </div>
              <div class="d-flex bd-highlight mb-3">
                <button mat-button="" matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-hnv-1-5" cdk-describedby-host="hnv-1" type="button">
                  <span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span
                    class="mdc-button__label"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"
                      fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg>
                    Regresar</span><span class="mat-mdc-focus-indicator"></span><span matRipple
                    class="mat-ripple mat-mdc-button-ripple"></span><span
                    class="mat-mdc-button-touch-target"></span></button><button
                  [disabled]="this.documentosUnidadForm.invalid" (click)="registraInformacion()"
                  matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-hnv-1-2" cdk-describedby-host="hnv-1">
                  <span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span
                    class="mdc-button__label">Guardar información </span><span
                    class="mat-mdc-focus-indicator"></span><span matRipple
                    class="mat-ripple mat-mdc-button-ripple"></span><span class="mat-mdc-button-touch-target"></span>
                </button>
              </div>
            </form>
          </mat-step>
        </mat-vertical-stepper>
        <br />
      </div>
    </div>
  </div>
</div>
<div *ngIf="cargarSpinner" class="blur-container">
  <div class="spinner-container">
    <img src="assets/images/Logotipo.png" alt="Spinner" class="rotating-image">
    <p class="loading-text">Cargando...</p>
  </div>
</div>
<app-footer></app-footer>