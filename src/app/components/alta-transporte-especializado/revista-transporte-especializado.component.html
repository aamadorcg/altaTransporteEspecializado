<app-nav></app-nav>
<div class="contenedor-principal">
  <div class="container py-5 mx-auto">
    <div class="row d-flex justify-content-center">
      <div class="fondo-contenedor-principal rounded">
        <br />
        <div class="d-grid gap-1 d-md-flex fondo-stepper-encabezado rounded">
          <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded"><span><i
                class="bi bi-people-fill"></i>&nbsp;PERSONA: {{ esPersonaFisica ? 'FÍSICA' : 'MORAL' }} </span>
          </h6>
          <div>
            <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded"><span><i
                  class="bi bi-bus-front"></i>&nbsp;REVISTA VEHÍCULAR ALTA DE VEHÍCULOS NUEVOS TRANSPORTE
                ESPECIALIZADO</span>
            </h6>
          </div>
        </div>
        <mat-vertical-stepper [linear]="true" #stepper animationDuration="1500"
          class="fondo-stepper rounded mat-stepper-vertical">
          <!-- Step 1 - DATOS DE LA FACTURA -->
          <mat-step [stepControl]="datosFacturaForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-bus-front stepper-icons"></span>
                <span> DATOS DE LA FACTURA </span>
              </h6>
            </ng-template>
            <form [formGroup]="datosFacturaForm">
              <div class="row g-3">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strNiv" class="form-label">NIV <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input appAlphanumeric type="text" minlength="17" maxlength="17" id="strNiv"
                      placeholder="Escribe NIV" formControlName="strNiv" name="strNiv" autocomplete="off"
                      class="form-control" [ngClass]="{
             'is-invalid': datosFacturaForm.get('strNiv')?.invalid && (datosFacturaForm.get('strNiv')?.touched || datosFacturaForm.get('strNiv')?.dirty), 
             'is-valid': datosFacturaForm.get('strNiv')?.valid && (datosFacturaForm.get('strNiv')?.touched || datosFacturaForm.get('strNiv')?.dirty),
              }" />
                    <div class="invalid-feedback"
                      *ngIf="datosFacturaForm.get('strNiv')?.invalid && (datosFacturaForm.get('strNiv')?.touched || datosFacturaForm.get('strNiv')?.dirty)">
                      <ng-container *ngIf="datosFacturaForm.get('strNiv')?.hasError('required')"> Campo Obligatorio
                      </ng-container>
                      <ng-container *ngIf="datosFacturaForm.get('strNiv')?.hasError('minlength')"> Debe tener al menos
                        17 caracteres </ng-container>
                      <ng-container *ngIf="datosFacturaForm.get('strNiv')?.hasError('maxlength')"> No puede tener más
                        de 17 caracteres </ng-container>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strCveVeh" class="form-label">CLAVE VEHICULAR<b class="asteriscos">*</b></label>
                  <input type="text" formControlName="strCveVeh" id="strCveVeh" name="strCveVeh" autocomplete="off"
                    class="form-control" [matAutocomplete]="auto" placeholder="Escribe la clave vehicular"
                    (blur)="validaClaveVehicular($event)" (input)="filtrarOpciones($event)" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strCveVeh')?.invalid && (datosFacturaForm.get('strCveVeh')?.touched || datosFacturaForm.get('strCveVeh')?.dirty), 
            'is-valid': datosFacturaForm.get('strCveVeh')?.valid && (datosFacturaForm.get('strCveVeh')?.touched || datosFacturaForm.get('strCveVeh')?.dirty),
             }">
                  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onOptionSelected($event)"
                    [displayWith]="displayFn">
                    <mat-option *ngFor="let opcion of opcCveVehFiltradas.slice(0,3)" [value]="opcion">
                      {{opcion.strClaveVehicular}}-{{opcion.strEmpresa}}-{{opcion.strModelo}}
                    </mat-option>
                  </mat-autocomplete>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strMotor" class="form-label">NÚMERO DE MOTOR <b class="asteriscos">*</b></label>
                  <input appAlphanumeric type="text" minlength="1" maxlength="20" formControlName="strMotor"
                    id="strMotor" name="strMotor" autocomplete="off" class="form-control"
                    placeholder="Escribe el número del motor" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strMotor')?.invalid && (datosFacturaForm.get('strMotor')?.touched || datosFacturaForm.get('strMotor')?.dirty), 
            'is-valid': datosFacturaForm.get('strMotor')?.valid && (datosFacturaForm.get('strMotor')?.touched || datosFacturaForm.get('strMotor')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strMotor')?.invalid && (datosFacturaForm.get('strMotor')?.touched || datosFacturaForm.get('strMotor')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strMotor')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strMarca" class="form-label">MARCA <b class="asteriscos">*</b></label><input
                    appAlphanumeric type="text" formControlName="strMarca" id="strMarca" name="strMarca"
                    autocomplete="off" class="form-control" placeholder="Escribe la marca del vehículo" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strMarca')?.invalid && (datosFacturaForm.get('strMarca')?.touched || datosFacturaForm.get('strMarca')?.dirty), 
            'is-valid': datosFacturaForm.get('strMarca')?.valid && (datosFacturaForm.get('strMarca')?.touched || datosFacturaForm.get('strMarca')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strMarca')?.invalid && (datosFacturaForm.get('strMarca')?.touched || datosFacturaForm.get('strMarca')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strMarca')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="intModelo" class="form-label">MODELO <b class="asteriscos">*</b></label><input appNumeric
                    type="text" minlength="4" maxlength="4" formControlName="intModelo" id="intModelo" name="intModelo"
                    autocomplete="off" class="form-control" placeholder="Escribe modelo" [ngClass]="{
            'is-invalid': datosFacturaForm.get('intModelo')?.invalid && (datosFacturaForm.get('intModelo')?.touched || datosFacturaForm.get('intModelo')?.dirty), 
            'is-valid': datosFacturaForm.get('intModelo')?.valid && (datosFacturaForm.get('intModelo')?.touched || datosFacturaForm.get('intModelo')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('intModelo')?.invalid && (datosFacturaForm.get('intModelo')?.touched || datosFacturaForm.get('intModelo')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('intModelo')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strTipoVeh" class="form-label">TIPO<b class="asteriscos">*</b> </label><input
                    appAlphanumeric type="text" formControlName="strTipoVeh" id="strTipoVeh" name="strTipoVeh"
                    autocomplete="off" class="form-control" placeholder="Escribe tipo vehículo" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strTipoVeh')?.invalid && (datosFacturaForm.get('strTipoVeh')?.touched || datosFacturaForm.get('strTipoVeh')?.dirty), 
            'is-valid': datosFacturaForm.get('strTipoVeh')?.valid && (datosFacturaForm.get('strTipoVeh')?.touched || datosFacturaForm.get('strTipoVeh')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strTipoVeh')?.invalid && (datosFacturaForm.get('strTipoVeh')?.touched || datosFacturaForm.get('strTipoVeh')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strTipoVeh')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intCapacidad" class="form-label">CAPACIDAD<b class="asteriscos">*</b> </label><input
                    appNumeric type="text" minlength="1" formControlName="intCapacidad" id="intCapacidad"
                    name="intCapacidad" autocomplete="off" class="form-control" placeholder="Escribe capacidad"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('intCapacidad')?.invalid && (datosFacturaForm.get('intCapacidad')?.touched || datosFacturaForm.get('intCapacidad')?.dirty), 
            'is-valid': datosFacturaForm.get('intCapacidad')?.valid && (datosFacturaForm.get('intCapacidad')?.touched || datosFacturaForm.get('intCapacidad')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('intCapacidad')?.invalid && (datosFacturaForm.get('intCapacidad')?.touched || datosFacturaForm.get('intCapacidad')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('intCapacidad')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intCilindros" class="form-label">CILINDROS<b class="asteriscos">*</b> </label>
                  <input appNumeric type="text" formControlName="intCilindros" id="intCilindros" name="intCilindros"
                    autocomplete="off" maxlength="2" class="form-control" placeholder="Escribe el número de cilindros"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('intCilindros')?.invalid && (datosFacturaForm.get('intCilindros')?.touched || datosFacturaForm.get('intCilindros')?.dirty), 
            'is-valid': datosFacturaForm.get('intCilindros')?.valid && (datosFacturaForm.get('intCilindros')?.touched || datosFacturaForm.get('intCilindros')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('intCilindros')?.invalid && (datosFacturaForm.get('intCilindros')?.touched || datosFacturaForm.get('intCilindros')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('intCilindros')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strCombustible" class="form-label">COMBUSTIBLE <b class="asteriscos">*</b></label>
                  <select formControlName="strCombustible" id="strCombustible" name="strCombustible"
                    (focus)="onSelectFocus('strCombustible')" (change)="onSelectChange($event, 'strCombustible')"
                    [ngClass]="{
                      'is-invalid': datosFacturaForm.get('strCombustible')?.invalid && datosFacturaForm.get('strCombustible')?.touched,
                      'is-valid': datosFacturaForm.get('strCombustible')?.valid && datosFacturaForm.get('strCombustible')?.touched
                    }" class="form-select">
                    <option value="" selected disabled> Seleccione combustible</option>
                    <option *ngFor="let combustible of listaCombustibles" [value]="combustible.intIdCombustible">
                      {{ combustible.strCombustible }}
                    </option>
                  </select>
                  <div class="invalid-feedback">Campo obligatorio</div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strColor" class="form-label">COLOR<b class="asteriscos">*</b> </label><input
                    appAlphanumeric type="text" minlength="4" formControlName="strColor" id="strColor" name="strColor"
                    autocomplete="off" class="form-control" placeholder="Escribe color del vehículo" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strColor')?.invalid && (datosFacturaForm.get('strColor')?.touched || datosFacturaForm.get('strColor')?.dirty), 
            'is-valid': datosFacturaForm.get('strColor')?.valid && (datosFacturaForm.get('strColor')?.touched || datosFacturaForm.get('strColor')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strColor')?.invalid && (datosFacturaForm.get('strColor')?.touched || datosFacturaForm.get('strColor')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strColor')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="intPuertas" class="form-label">PUERTAS <b class="asteriscos">*</b></label><input
                    appNumeric type="text" maxlength="4" formControlName="intPuertas" id="intPuertas" name="intPuertas"
                    maxlength="2" autocomplete="off" class="form-control" placeholder="Escribe número de puertas"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('intPuertas')?.invalid && (datosFacturaForm.get('intPuertas')?.touched || datosFacturaForm.get('intPuertas')?.dirty), 
            'is-valid': datosFacturaForm.get('intPuertas')?.valid && (datosFacturaForm.get('intPuertas')?.touched || datosFacturaForm.get('intPuertas')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('intPuertas')?.invalid && (datosFacturaForm.get('intPuertas')?.touched || datosFacturaForm.get('intPuertas')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('intPuertas')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strEntFed" class="form-label">ENTIDAD FEDERATIVA <b class="asteriscos">*</b></label><input
                    appAlphanumeric type="text" minlength="4" formControlName="strEntFed" id="strEntFed"
                    name="strEntFed" autocomplete="off" class="form-control" placeholder="Escribe entidad federativa"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('strEntFed')?.invalid && (datosFacturaForm.get('strEntFed')?.touched || datosFacturaForm.get('strEntFed')?.dirty), 
            'is-valid': datosFacturaForm.get('strEntFed')?.valid && (datosFacturaForm.get('strEntFed')?.touched || datosFacturaForm.get('strEntFed')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strEntFed')?.invalid && (datosFacturaForm.get('strEntFed')?.touched || datosFacturaForm.get('strEntFed')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strEntFed')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="dtFechaFact" class="form-label">FECHA DE LA FACTURA <b class="asteriscos">*</b></label>
                  <mat-form-field appearance="outline" class="w-100 form-control">
                    <input matInput formControlName="dtFechaFact" id="dtFechaFact" name="dtFechaFact" autocomplete="off"
                      class="form-control" placeholder="Escribe fecha de la factura" [ngClass]="{
            'is-invalid': datosFacturaForm.get('dtFechaFact')?.invalid && (datosFacturaForm.get('dtFechaFact')?.touched || datosFacturaForm.get('dtFechaFact')?.dirty), 
            'is-valid': datosFacturaForm.get('dtFechaFact')?.valid && (datosFacturaForm.get('dtFechaFact')?.touched || datosFacturaForm.get('dtFechaFact')?.dirty),
             }" [matDatepicker]="picker" />
                    <mat-datepicker-toggle matIconPrefix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('dtFechaFact')?.invalid && (datosFacturaForm.get('dtFechaFact')?.touched || datosFacturaForm.get('dtFechaFact')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('dtFechaFact')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strNoFact" class="form-label">NO. FACTURA <b class="asteriscos">*</b></label><input
                    appAlphanumeric type="text" minlength="4" formControlName="strNoFact" id="strNoFact"
                    name="strNoFact" autocomplete="off" class="form-control" placeholder="Escribe número de factura"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('strNoFact')?.invalid && (datosFacturaForm.get('strNoFact')?.touched || datosFacturaForm.get('strNoFact')?.dirty), 
            'is-valid': datosFacturaForm.get('strNoFact')?.valid && (datosFacturaForm.get('strNoFact')?.touched || datosFacturaForm.get('strNoFact')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strNoFact')?.invalid && (datosFacturaForm.get('strNoFact')?.touched || datosFacturaForm.get('strNoFact')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strNoFact')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strImporteFact" class="form-label">IMPORTE DE FACTURA <b
                      class="asteriscos">*</b></label><input appNumericDecimal type="text" minlength="4"
                    formControlName="strImporteFact" id="strImporteFact" name="strImporteFact" autocomplete="off"
                    class="form-control" placeholder="Escribe importe de factura" [ngClass]="{
                      'is-invalid': datosFacturaForm.get('strImporteFact')?.invalid && (datosFacturaForm.get('strImporteFact')?.touched || datosFacturaForm.get('strImporteFact')?.dirty),
                      'is-valid': datosFacturaForm.get('strImporteFact')?.valid && (datosFacturaForm.get('strImporteFact')?.touched || datosFacturaForm.get('strImporteFact')?.dirty)
                    }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strImporteFact')?.invalid && (datosFacturaForm.get('strImporteFact')?.touched || datosFacturaForm.get('strImporteFact')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strImporteFact')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strProcedencia" class="form-label">PROCEDENCIA <b class="asteriscos">*</b></label>
                  <select formControlName="strProcedencia" id="strProcedencia" name="strProcedencia"
                    (focus)="onSelectFocus('strProcedencia')" [ngClass]="{
               'is-invalid': datosFacturaForm.get('strProcedencia')?.invalid && datosFacturaForm.get('strProcedencia')?.touched,
               'is-valid': datosFacturaForm.get('strProcedencia')?.valid && datosFacturaForm.get('strProcedencia')?.touched
             }" class="form-select">
                    <option value="" selected disabled> Seleccione procedencia</option>
                    <option value="NACIONAL" selected> NACIONAL</option>
                    <option value="EXTRANJERO" selected> EXTRANJERO</option>
                  </select>
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strProcedencia')?.invalid && (datosFacturaForm.get('strProcedencia')?.touched || datosFacturaForm.get('strProcedencia')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strProcedencia')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-6">
                  <label for="strAgenciaDist" class="form-label">AGENCIA DISTRIBUIDORA<b class="asteriscos">*</b>
                  </label><input appAlphanumeric type="text" minlength="3" formControlName="strAgenciaDist"
                    id="strAgenciaDist" name="strAgenciaDist" autocomplete="off" class="form-control"
                    placeholder="Escribe agencia distribuidora" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strAgenciaDist')?.invalid && (datosFacturaForm.get('strAgenciaDist')?.touched || datosFacturaForm.get('strAgenciaDist')?.dirty), 
            'is-valid': datosFacturaForm.get('strAgenciaDist')?.valid && (datosFacturaForm.get('strAgenciaDist')?.touched || datosFacturaForm.get('strAgenciaDist')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strAgenciaDist')?.invalid && (datosFacturaForm.get('strAgenciaDist')?.touched || datosFacturaForm.get('strAgenciaDist')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strAgenciaDist')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strTipoServ" class="form-label">TIPO DE SERVICIO <b class="asteriscos">*</b></label><input
                    appAlphanumeric type="text" minlength="4" formControlName="strTipoServ" id="strTipoServ"
                    name="strTipoServ" autocomplete="off" class="form-control" placeholder="Escribe tipo de servicio"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('strTipoServ')?.invalid && (datosFacturaForm.get('strTipoServ')?.touched || datosFacturaForm.get('strTipoServ')?.dirty), 
            'is-valid': datosFacturaForm.get('strTipoServ')?.valid && (datosFacturaForm.get('strTipoServ')?.touched || datosFacturaForm.get('strTipoServ')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strTipoServ')?.invalid && (datosFacturaForm.get('strTipoServ')?.touched || datosFacturaForm.get('strTipoServ')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strTipoServ')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strUsoVeh" class="form-label">USO DEL VEHÍCULO <b class="asteriscos">*</b></label>
                  <!-- <input
                    appAlphanumeric type="text" minlength="4" formControlName="strUsoVeh" id="strUsoVeh"
                    name="strUsoVeh" autocomplete="off" class="form-control" placeholder="Escribe uso del vvehículo"
                    [ngClass]="{
            'is-invalid': datosFacturaForm.get('strUsoVeh')?.invalid && (datosFacturaForm.get('strUsoVeh')?.touched || datosFacturaForm.get('strUsoVeh')?.dirty), 
            'is-valid': datosFacturaForm.get('strUsoVeh')?.valid && (datosFacturaForm.get('strUsoVeh')?.touched || datosFacturaForm.get('strUsoVeh')?.dirty),
             }" /> -->
                  <select formControlName="strUsoVeh" id="strUsoVeh" name="strUsoVeh"
                    (focus)="onSelectFocus('strUsoVeh')" [ngClass]="{
                'is-invalid': datosFacturaForm.get('strUsoVeh')?.invalid && datosFacturaForm.get('strUsoVeh')?.touched,
                'is-valid': datosFacturaForm.get('strUsoVeh')?.valid && datosFacturaForm.get('strUsoVeh')?.touched
              }" class="form-select">
                    <option value="" selected disabled> Seleccione uso del vehículo</option>
                    <option value="PERSONAL" selected> PERSONAL</option>
                    <option value="ESCOLAR" selected> ESCOLAR</option>
                  </select>
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strUsoVeh')?.invalid && (datosFacturaForm.get('strUsoVeh')?.touched || datosFacturaForm.get('strUsoVeh')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strUsoVeh')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <label for="strRepuve" class="form-label">REPUVE <b class="asteriscos">*</b></label><input type="text"
                    appAlphanumeric minlength="2" maxlength="8" formControlName="strRepuve" id="strRepuve"
                    name="strRepuve" autocomplete="off" class="form-control" placeholder="Escribe repuve" [ngClass]="{
            'is-invalid': datosFacturaForm.get('strRepuve')?.invalid && (datosFacturaForm.get('strRepuve')?.touched || datosFacturaForm.get('strRepuve')?.dirty), 
            'is-valid': datosFacturaForm.get('strRepuve')?.valid && (datosFacturaForm.get('strRepuve')?.touched || datosFacturaForm.get('strRepuve')?.dirty),
             }" />
                  <div class="invalid-feedback"
                    *ngIf="datosFacturaForm.get('strRepuve')?.invalid && (datosFacturaForm.get('strRepuve')?.touched || datosFacturaForm.get('strRepuve')?.dirty)">
                    <ng-container *ngIf="datosFacturaForm.get('strRepuve')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
              </div>
              <br />
              <div class="col-12 d-grid gap-1 d-md-flex justify-content-md-end">
                <button (click)="cargarDatosFormulario(datosFacturaForm, 'datosFacturaForm',true)" mat-button
                  matTooltip="Siguiente paso" matTooltipPosition="above" class="text-white boton-siguiente"
                  aria-describedby="cdk-describedby-message-pdb-1-2" cdk-describedby-host="pdb-1">
                  <span class="mdc-button__label">Siguiente
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor"
                      viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg>
                  </span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 2 - DATOS DEL PERMISIONARIO -->
          <mat-step [stepControl]="datosPermisionarioForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-person-vcard stepper-icons"></span>
                <span> DATOS DEL PERMISIONARIO </span>
              </h6>
            </ng-template>
            <form [formGroup]="datosPermisionarioForm">
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strRfc" class="form-label">RFC <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <div class="input-group">
                      <button type="button" class="btn icono bi bi-info-circle-fill"
                        (click)="muestraModalConImagen('strRfc')"></button>
                      <input appAlphanumeric formControlName="strRfc" type="text" id="strRfc" name="strRfc"
                        autocomplete="off" [minlength]="esPersonaFisica ? 13 : 12"
                        [maxlength]="esPersonaFisica ? 13 : 12" [placeholder]="rfcPlaceholder" [matTooltip]="rfcTooltip"
                        matTooltipPosition="above" [ngClass]="{
                          'is-invalid': datosPermisionarioForm.get('strRfc')?.invalid && (datosPermisionarioForm.get('strRfc')?.dirty || datosPermisionarioForm.get('strRfc')?.touched),
                          'is-valid': datosPermisionarioForm.get('strRfc')?.valid 
                          }" class="form-control">
                      <div class="invalid-feedback"
                        *ngIf="datosPermisionarioForm.get('strRfc')?.errors && (datosPermisionarioForm.get('strRfc')?.dirty || datosPermisionarioForm.get('strRfc')?.touched)">
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('required')">Campo
                          Obligatorio</ng-container>
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('minlength')">Debe tener 13
                          caracteres</ng-container>
                        <ng-container *ngIf="datosPermisionarioForm.get('strRfc')?.hasError('pattern')">Formato
                          inválido</ng-container>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strCurp" class="form-label">CURP <b class="asteriscos">*</b></label><input appAlphanumeric
                    formControlName="strCurp" type="text" minlength="18" maxlength="18" id="strCurp" name="strCurp"
                    autocomplete="off" class="form-control" placeholder="CURP: LLLL000000LLLLLLA0" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCurp')?.invalid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCurp')?.valid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCurp')?.invalid && (datosPermisionarioForm.get('strCurp')?.touched || datosPermisionarioForm.get('strCurp')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCurp')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strNombre" class="form-label"> {{ esPersonaFisica ? 'NOMBRE' : 'RAZÓN SOCIAL' }} <b
                      class="asteriscos">*</b>
                  </label><input appAlphanumeric formControlName="strNombre" type="text" minlength="3" id="strNombre"
                    name="strNombre" autocomplete="off" class="form-control"
                    [placeholder]="esPersonaFisica ? 'Escribe tu nombre' : 'Escribe tu razón social'" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNombre')?.invalid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNombre')?.valid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNombre')?.invalid && (datosPermisionarioForm.get('strNombre')?.touched || datosPermisionarioForm.get('strNombre')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNombre')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strApellidoPaterno" class="form-label">APELLIDO PATERNO <b
                      class="asteriscos">*</b></label><input appAlphanumeric formControlName="strApellidoPaterno" type="text"
                    minlength="4" id="strApellidoPaterno" name="strApellidoPaterno" autocomplete="off" class="form-control"
                    placeholder="Escribe tu apellido paterno" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strApellidoPaterno')?.invalid && (datosPermisionarioForm.get('strApellidoPaterno')?.touched || datosPermisionarioForm.get('strApellidoPaterno')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strApellidoPaterno')?.valid && (datosPermisionarioForm.get('strApellidoPaterno')?.touched || datosPermisionarioForm.get('strApellidoPaterno')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strApellidoPaterno')?.invalid && (datosPermisionarioForm.get('strApellidoPaterno')?.touched || datosPermisionarioForm.get('strApellidoPaterno')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strApellidoPaterno')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-4">
                  <label for="strApellidoMaterno" class="form-label">APELLIDO MATERNO <b
                      class="asteriscos">*</b></label><input appAlphanumeric formControlName="strApellidoMaterno" type="text"
                    minlength="4" id="strApellidoMaterno" name="strApellidoMaterno" autocomplete="off" class="form-control"
                    placeholder="Escribe tu apellido materno" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strApellidoMaterno')?.invalid && (datosPermisionarioForm.get('strApellidoMaterno')?.touched || datosPermisionarioForm.get('strApellidoMaterno')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strApellidoMaterno')?.valid && (datosPermisionarioForm.get('strApellidoMaterno')?.touched || datosPermisionarioForm.get('strApellidoMaterno')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strApellidoMaterno')?.invalid && (datosPermisionarioForm.get('strApellidoMaterno')?.touched || datosPermisionarioForm.get(' strApellidoMaterno')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strApellidoMaterno')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-2">
                  <label for="strSexo" class="form-label">SEXO <b class="asteriscos">*</b></label><input
                    formControlName="strSexo" type="text" minlength="4" id="strSexo" name="strSexo" autocomplete="off"
                    class="form-control" placeholder="Sexo" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strSexo')?.invalid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strSexo')?.valid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strSexo')?.invalid && (datosPermisionarioForm.get('strSexo')?.touched || datosPermisionarioForm.get('strSexo')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strSexo')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div *ngIf="esPersonaFisica" class="col-12 col-md-12 col-lg-2">
                  <label for="strFechaNac" class="form-label">FECHA NACIMIENTO <b class="asteriscos">*</b></label><input
                    formControlName="strFechaNac" type="text" minlength="4" id="strFechaNac" name="strFechaNac"
                    autocomplete="off" class="form-control" placeholder="Fecha de nacimiento" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strFechaNac')?.invalid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strFechaNac')?.valid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strFechaNac')?.invalid && (datosPermisionarioForm.get('strFechaNac')?.touched || datosPermisionarioForm.get('strFechaNac')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strFechaNac')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-8">
                  <label for="strCalle" class="form-label">CALLE <b class="asteriscos">*</b></label><input
                    appAlphanumeric formControlName="strCalle" type="text" minlength="4" id="strCalle"
                    name="strCalle" autocomplete="off" class="form-control"
                    placeholder="Escribe la calle de tu domicilio" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCalle')?.invalid && (datosPermisionarioForm.get('strCalle')?.touched || datosPermisionarioForm.get('strCalle')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCalle')?.valid && (datosPermisionarioForm.get('strCalle')?.touched || datosPermisionarioForm.get('strCalle')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCalle')?.invalid && (datosPermisionarioForm.get('strCalle')?.touched || datosPermisionarioForm.get('strCalle')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCalle')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strNumeroExterior" class="form-label">NÚMERO EXTERIOR <b class="asteriscos">*</b></label><input
                    appAlphanumeric formControlName="strNumeroExterior" type="text" id="strNumeroExterior" name="strNumeroExterior"
                    autocomplete="off" class="form-control" placeholder="Escribe número exterior" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNumeroExterior')?.invalid && (datosPermisionarioForm.get('strNumeroExterior')?.touched || datosPermisionarioForm.get('strNumeroExterior')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNumeroExterior')?.valid && (datosPermisionarioForm.get('strNumeroExterior')?.touched || datosPermisionarioForm.get('strNumeroExterior')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNumeroExterior')?.invalid && (datosPermisionarioForm.get('strNumeroExterior')?.touched || datosPermisionarioForm.get('strNumeroExterior')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNumeroExterior')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-2">
                  <label for="strNumeroInterior" class="form-label">NÚMERO INTERIOR<b class="asteriscos">*</b> </label><input
                    appAlphanumeric formControlName="strNumeroInterior" type="text" id="strNumeroInterior" name="strNumeroInterior"
                    autocomplete="off" class="form-control" placeholder="Escribe número interior" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strNumeroInterior')?.invalid && (datosPermisionarioForm.get('strNumeroInterior')?.touched || datosPermisionarioForm.get('strNumeroInterior')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strNumeroInterior')?.valid && (datosPermisionarioForm.get('strNumeroInterior')?.touched || datosPermisionarioForm.get('strNumeroInterior')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strNumeroInterior')?.invalid && (datosPermisionarioForm.get('strNumeroInterior')?.touched || datosPermisionarioForm.get('strNumeroInterior')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strNumeroInterior')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="estado" class="form-label">ESTADO <b class="asteriscos">*</b></label>
                  <input appAlphanumeric formControlName="estado" type="text" minlength="4" id="estado" name="estado"
                    autocomplete="off" class="form-control" placeholder="Ingrese su estado" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('estado')?.invalid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('estado')?.valid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('estado')?.invalid && (datosPermisionarioForm.get('estado')?.touched || datosPermisionarioForm.get('estado')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('estado')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strMunicipio" class="form-label">MUNICIPIO <b class="asteriscos">*</b> </label>
                  <input type="text" formControlName="strMunicipio" id="strMunicipio" name="strMunicipio"
                    class="form-control" placeholder="Ingrese su municipio" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strMunicipio')?.invalid && datosPermisionarioForm.get('strMunicipio')?.touched,
                      'is-valid': datosPermisionarioForm.get('strMunicipio')?.valid && datosPermisionarioForm.get('strMunicipio')?.touched
                    }" />

                  <div class="invalid-feedback">Campo obligatorio</div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strLocalidad" class="form-label">LOCALIDAD <b class="asteriscos">*</b></label>
                  <input type="text" formControlName="strLocalidad" id="strLocalidad" name="strLocalidad"
                    class="form-control" placeholder="Ingrese su localidad" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strLocalidad')?.invalid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strLocalidad')?.valid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty),
                       }" />
                  <!-- <select formControlName="strLocalidad" id="strLocalidad" name="strLocalidad" (focus)="onSelectFocus()"
                    [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strLocalidad')?.invalid && datosPermisionarioForm.get('strLocalidad')?.touched,
                      'is-valid': datosPermisionarioForm.get('strLocalidad')?.valid && datosPermisionarioForm.get('strLocalidad')?.touched
                    }" class="form-select">
                    <option value="" selected disabled> Seleccione su localidad</option>
                    <option *ngFor="let localidad of listaLocalidades" [value]="localidad.intIdLocalidad">
                      {{ localidad.strNombreLocalidad }}
                    </option>
                  </select> -->
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strLocalidad')?.invalid && (datosPermisionarioForm.get('strLocalidad')?.touched || datosPermisionarioForm.get('strLocalidad')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strLocalidad')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strCodigoPostal" class="form-label">CÓDIGO POSTAL <b class="asteriscos">*</b></label><input
                    appNumeric formControlName="strCodigoPostal" type="text" maxlength="5" minlength="5" id="strCodigoPostal" name="strCodigoPostal"
                    autocomplete="off" class="form-control" placeholder="Escribe tu código postal" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strCodigoPostal')?.invalid && (datosPermisionarioForm.get('strCodigoPostal')?.touched || datosPermisionarioForm.get('strCodigoPostal')?.dirty), 
                      'is-valid': datosPermisionarioForm.get('strCodigoPostal')?.valid && (datosPermisionarioForm.get('strCodigoPostal')?.touched || datosPermisionarioForm.get('strCodigoPostal')?.dirty),
                       }" />
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strCodigoPostal')?.invalid && (datosPermisionarioForm.get('strCodigoPostal')?.touched || datosPermisionarioForm.get('strCodigoPostal')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strCodigoPostal')?.hasError('required')"> Campo Obligatorio
                    </ng-container>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strColonia" class="form-label">COLONIA<b class="asteriscos">*</b> </label>

                  <select formControlName="strColonia" id="strColonia" name="strColonia"
                    (focus)="onSelectFocus('strColonia')" (change)="onSelectChange($event, 'strColonia')" [ngClass]="{
                         'is-invalid': datosPermisionarioForm.get('strColonia')?.invalid && datosPermisionarioForm.get('strColonia')?.touched,
                         'is-valid': datosPermisionarioForm.get('strColonia')?.valid && datosPermisionarioForm.get('strColonia')?.touched
                       }" class="form-select">
                    <option value="" selected disabled> Seleccione su colonia</option>
                    <option *ngFor="let colonia of listaColonias" [value]="colonia.asentamiento">
                      {{ colonia.asentamiento }}
                    </option>
                  </select>
                  <div class="invalid-feedback"
                    *ngIf="datosPermisionarioForm.get('strColonia')?.invalid && (datosPermisionarioForm.get('strColonia')?.touched || datosPermisionarioForm.get('strColonia')?.dirty)">
                    <ng-container *ngIf="datosPermisionarioForm.get('strColonia')?.hasError('required')"> Campo
                      Obligatorio </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3 mat-step-label mat-step-label-active mat-step-label-selected">
                <div class="mat-step-text-label ng-star-inserted">
                  <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                    <span class="bi bi-person-lines-fill stepper-icons"></span>
                    <span> MEDIOS DE CONTACTO </span>
                  </h6>
                </div>
              </div>
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTelefonoRepresentante" class="form-label">TELÉFONO REPRESENTANTE <b
                      class="asteriscos">*</b></label>
                  <input appNumeric formControlName="strTelefonoRepresentante" type="text" minlength="10" maxlength="10"
                    matTooltip="Tu número de teléfono debe contener 10 números" matTooltipPosition="above"
                    id="strTelefonoRepresentante" placeholder="Escribe teléfono representante"
                    name="strTelefonoRepresentante" autocomplete="off" class="form-control" [ngClass]="{
                      'is-invalid': datosPermisionarioForm.get('strTelefonoRepresentante')?.invalid && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched),
                      'is-valid': datosPermisionarioForm.get('strTelefonoRepresentante')?.valid 
                      }" />
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('required') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    Campo Obligatorio
                  </small>
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('minlength') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    Debe tener 10 números
                  </small>
                  <small
                    *ngIf="datosPermisionarioForm.get('strTelefonoRepresentante')?.hasError('maxlength') && (datosPermisionarioForm.get('strTelefonoRepresentante')?.dirty || datosPermisionarioForm.get('strTelefonoRepresentante')?.touched)"
                    class="text-danger error-message">
                    No puede tener más de 10 números
                  </small>
                </div>

                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strCorreo" class="form-label">CORREO <b class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input type="email" formControlName="strCorreo" id="strCorreo" [ngClass]="{
                          'is-invalid': datosPermisionarioForm.get('strCorreo')?.invalid && (datosPermisionarioForm.get('strCorreo')?.dirty || datosPermisionarioForm.get('strCorreo')?.touched),
                          'is-valid': datosPermisionarioForm.get('strCorreo')?.valid 
                          }" placeholder="Escribe tu correo electrónico" name="strCorreo"
                      matTooltip="Formato correo: nombre@ejemplo.com" matTooltipPosition="above" class="form-control" />
                    <i class="fa fa-check"></i>
                    <small
                      *ngIf="datosPermisionarioForm.get('strCorreo')?.hasError('required') && (datosPermisionarioForm.get('strCorreo')?.dirty || datosPermisionarioForm.get('strCorreo')?.touched)"
                      class="text-danger error-message">
                      Campo Obligatorio
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strCorreo')?.hasError('email') && (datosPermisionarioForm.get('strCorreo')?.dirty || datosPermisionarioForm.get('strCorreo')?.touched)"
                      class="text-danger error-message">
                      Correo electrónico inválido
                    </small>
                  </div>
                </div>

                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTelefonoConcesionario" class="form-label">TELÉFONO CONCESIONARIO <b
                      class="asteriscos">*</b></label>
                  <div class="input-container">
                    <input appNumeric formControlName="strTelefonoConcesionario" name="strTelefonoConcesionario" type="text"
                      minlength="10" maxlength="10" matTooltip="Tu número de teléfono debe contener 10 números"
                      matTooltipPosition="above" id="strTelefonoConcesionario" placeholder="Escribe teléfono concesionario"
                      autocomplete="off" class="form-control" [ngClass]="{
                        'is-invalid': datosPermisionarioForm.get('strTelefonoConcesionario')?.invalid && (datosPermisionarioForm.get('strTelefonoConcesionario')?.dirty || datosPermisionarioForm.get('strTelefonoConcesionario')?.touched),
                        'is-valid': datosPermisionarioForm.get('strTelefonoConcesionario')?.valid 
                        }" />
                    <i class="fa fa-check"></i>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoConcesionario')?.hasError('required') && (datosPermisionarioForm.get('strTelefonoConcesionario')?.dirty || datosPermisionarioForm.get('strTelefonoConcesionario')?.touched)"
                      class="text-danger error-message">
                      Campo Obligatorio
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoConcesionario')?.hasError('minlength') && (datosPermisionarioForm.get('strTelefonoConcesionario')?.dirty || datosPermisionarioForm.get('strTelefonoConcesionario')?.touched)"
                      class="text-danger error-message">
                      Debe tener 10 números
                    </small>
                    <small
                      *ngIf="datosPermisionarioForm.get('strTelefonoConcesionario')?.hasError('maxlength') && (datosPermisionarioForm.get('strTelefonoConcesionario')?.dirty || datosPermisionarioForm.get('strTelefonoConcesionario')?.touched)"
                      class="text-danger error-message">
                      No puede tener más de 10 números
                    </small>
                  </div>
                </div>
              </div>
              <br />
              <div class="d-flex bd-highlight mb-3">
                <button mat-button matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-5" cdk-describedby-host="ewh-1" type="button"><span
                    class="mdc-button__label"></span><span class="mdc-button__label"><svg
                      xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" viewBox="0 0 16 17"
                      class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg> Regresar</span></button>
                <button (click)="cargarDatosFormulario(datosPermisionarioForm, 'datosPermisionarioForm',true)"
                  mat-button matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-2" cdk-describedby-host="ewh-1">
                  <span class="mdc-button__label">Siguiente <svg xmlns="http://www.w3.org/2000/svg" width="17"
                      height="17" fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg></span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 3 - TIPO TRÁMITE -->
          <mat-step [stepControl]="tramiteForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-receipt stepper-icons"></span>
                <span> TIPO TRÁMITE </span>
              </h6>
            </ng-template>
            <form [formGroup]="tramiteForm">
              <div class="row g-3 ">
                <div class="col-12 col-md-12 col-lg-4">
                  <label for="strTramite" class="form-label">TIPO REVISTA <b class="asteriscos">*</b></label>
                  <select formControlName="strTramite" id="strTramite" name="strTramite"
                    (focus)="onSelectFocus('strTramite')" (change)="onSelectChange($event, 'strTramite')" [ngClass]="{
                      'is-invalid': tramiteForm.get('strTramite')?.invalid && tramiteForm.get('strTramite')?.touched,
                      'is-valid': tramiteForm.get('strTramite')?.valid && tramiteForm.get('strTramite')?.touched
                    }" class="form-select">
                    <option value="" disabled selected> Seleccione una opción</option>
                    <option value="3" selected> PERMISO DE TRANSPORTE ESPECIALIZADO DE PERSONAL</option>
                    <option value="4" selected> PERMISO DE TRANSPORTE ESPECIALIZADO ESCOLAR</option>
                  </select>
                  <div class="invalid-feedback">Campo obligatorio</div>
                </div>
              </div>
              <br />
              <div class="d-flex bd-highlight mb-3">
                <button mat-button matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-5" cdk-describedby-host="ewh-1" type="button"><span
                    class="mdc-button__label"></span><span class="mdc-button__label"><svg
                      xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" viewBox="0 0 16 17"
                      class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg> Regresar</span></button>
                <button (click)="cargarDatosFormulario(tramiteForm, 'tramiteForm',true)" mat-button
                  matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-ewh-1-2" cdk-describedby-host="ewh-1">
                  <span class="mdc-button__label">Siguiente <svg xmlns="http://www.w3.org/2000/svg" width="17"
                      height="17" fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-right-fill">
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z">
                      </path>
                    </svg></span>
                </button>
              </div>
              <br />
              <hr />
              <p class="texto-obligatorio">
                Los campos con ( <b class="asteriscos">*</b> ) son obligatorios
              </p>
            </form>
          </mat-step>
          <!-- Step 4 - DOCUMENTOS DE LA UNIDAD  -->
          <mat-step [stepControl]="documentosUnidadForm">
            <ng-template matStepLabel>
              <h6 [ngClass]="esPersonaFisica ? 'tittle' : 'tittleMoral'" class="me-auto p-1 rounded">
                <span class="bi bi-file-earmark-pdf stepper-icons"></span>
                <span> DOCUMENTOS DE LA UNIDAD </span>
              </h6>
            </ng-template>
            <form [formGroup]="documentosUnidadForm"><br><br>
              <div class="container alert terminos shadow-lg rounded">
                <div class="row g-3 justify-content-center">
                  <p> Adjunta los documentos solicitados en formato <b>.pdf</b><br> Has uso de las herramientas <svg
                      matTooltip="Seleccionar Documento" matTooltipPosition="left" xmlns="http://www.w3.org/2000/svg"
                      width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
                      class="mat-mdc-tooltip-trigger bi bi-upload buton-subir-archivo"
                      aria-describedby="cdk-describedby-message-bxa-1-9" cdk-describedby-host="bxa-1">
                      <path
                        d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5">
                      </path>
                      <path
                        d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z">
                      </path>
                    </svg> para adjuntar un documento y de <svg matTooltip="Ver Documento" matTooltipPosition="below"
                      xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
                      class="mat-mdc-tooltip-trigger bi bi-eyeglasses buton-ver-archivo"
                      aria-describedby="cdk-describedby-message-bxa-1-10" cdk-describedby-host="bxa-1">
                      <path
                        d="M4 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4m2.625.547a3 3 0 0 0-5.584.953H.5a.5.5 0 0 0 0 1h.541A3 3 0 0 0 7 8a1 1 0 0 1 2 0 3 3 0 0 0 5.959.5h.541a.5.5 0 0 0 0-1h-.541a3 3 0 0 0-5.584-.953A1.993 1.993 0 0 0 8 6c-.532 0-1.016.208-1.375.547M14 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0">
                      </path>
                    </svg> para visualizar el documento seleccionado. </p>
                </div>
              </div>
              <div class="col-12 col-md-12 col-lg-4">
                <label for="strTipoVehiculo" class="form-label">TIPO VEHICULO <b class="asteriscos">*</b></label>
                <select formControlName="strTipoVehiculo" id="strTipoVehiculo" name="strTipoVehiculo"
                  (focus)="onSelectFocus('strTipoVehiculo')" (change)="onSelectChange($event, 'strTipoVehiculo')"
                  [ngClass]="{
                    'is-invalid': documentosUnidadForm.get('strTipoVehiculo')?.invalid && documentosUnidadForm.get('strTipoVehiculo')?.touched,
                    'is-valid': documentosUnidadForm.get('strTipoVehiculo')?.valid && documentosUnidadForm.get('strTipoVehiculo')?.touched
                  }" class="form-select">
                  <option value="" disabled selected> Seleccione una opción</option>
                  <option value="1" selected> UNIDAD USADA</option>
                  <option value="2" selected> UNIDAD NUEVA PAGANDO</option>
                  <option value="3" selected> UNIDAD NUEVA PAGADA</option>
                </select>
                <div class="invalid-feedback">Campo obligatorio</div>
              </div>
              <div class="cards-container d-grid justify-content-center">
                <!----------------------VEHICULOS USADOS GENERAL------------------------------------------>
                <app-card-pdf [pdfUrl]="pdfUrls['solicitudTitular']"
                  [title]="'SOLICITUD DIRIGIDA AL TITULAR DE LA SMyT'" [controlName]="'solicitudTitular'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['solicitudTitular']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="(esUnidadUsada || esUnidadNueva) || arregloDocumentosVisibles.includes('solicitudTitular')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['facturaEndosada']"
                  [title]="'FACTURA ENDOSADA A FAVOR DEL CONCESIONARIO(A) O EMPRESA'" [controlName]="'facturaEndosada'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['facturaEndosada']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="(esUnidadUsada || (esUnidadNueva && esNuevaPagada)) || arregloDocumentosVisibles.includes('facturaEndosada')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['compraVenta']" [title]="'CONTRATO DE COMPRA VENTA'"
                  [controlName]="'compraVenta'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['compraVenta']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('compraVenta')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['ineVendedor']" [title]="'INE DEL VENDEDOR'"
                  [controlName]="'ineVendedor'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['ineVendedor']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('ineVendedor')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['ineComprador']" [title]="'INE DEL COMPRADOR'"
                  [controlName]="'ineComprador'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['ineComprador']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('ineComprador')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['ineTestigo']" [title]="'INE TESTIGO'" [controlName]="'ineTestigo'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['ineTestigo']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('ineTestigo')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['oriBajaUnidad']" [title]="'ORIGINAL DE LA BAJA DE LA UNIDAD QUE ENTRA'"
                  [controlName]="'oriBajaUnidad'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['oriBajaUnidad']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('oriBajaUnidad')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['validacionTenencia']"
                  [title]="'VALIDACIÓN DE TENENCIAS EN LA DIRECCIÓN DE INGRESOS Y FISCALIZACIÓN'"
                  [controlName]="'validacionTenencia'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['validacionTenencia']"
                  [esModificado]="esModificacion" [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('validacionTenencia')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['ultimoPagoRefrendo']" [title]="'RECIBO DEL ÚLTIMO PAGO DE REFRENDO'"
                  [controlName]="'ultimoPagoRefrendo'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['ultimoPagoRefrendo']"
                  [esModificado]="esModificacion" [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('ultimoPagoRefrendo')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['polizaViajero']"
                  [title]="'PÓLIZA SEGURO DEL VIAJERO VIGENCIA MÍNIMA DE 1 MES'" [controlName]="'polizaViajero'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['polizaViajero']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('polizaViajero')">
                </app-card-pdf>
                <!---->

                <app-card-pdf [pdfUrl]="pdfUrls['polizaViajero']"
                  [title]="'EN CASO DE CONVERSIÓN A GAS, ORIGINAL Y COPIA DE '" [controlName]="'polizaViajero'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['polizaViajero']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('polizaViajero')">
                </app-card-pdf>

                <!---->

                <app-card-pdf [pdfUrl]="pdfUrls['repuve']" [title]="'REPUVE'" [controlName]="'repuve'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['repuve']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('repuve')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['comprobanteDom']"
                  [title]="'COMPROBANTE DE DOMICILIO (MÁXIMO ANTIGÜEDAD DE 3 MESES)'" [controlName]="'comprobanteDom'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['comprobanteDom']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="(esUnidadUsada || esUnidadNueva) || arregloDocumentosVisibles.includes('comprobanteDom')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['curp']" [title]="'CURP'" [controlName]="'curp'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['curp']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('curp')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['convenioEmpresa']"
                  [title]="'CONVENIO ACTUALIZADO CON LA EMPRESA A LA QUE SE LE PRESTA EL SERVICIO'"
                  [controlName]="'convenioEmpresa'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['convenioEmpresa']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('convenioEmpresa')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['constanciaFis']"
                  [title]="'CONSTANCIA DE SITUACIÓN FISCAL QUE INDIQUE ESTA OBLIGACIÓN'" [controlName]="'constanciaFis'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['constanciaFis']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadUsada || arregloDocumentosVisibles.includes('constanciaFis')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['antPenales']"
                  [title]="'CARTA DE ANTECEDENTES NO PENALES (VIGENCIA NO MAYOR A 3 MESES)'"
                  [controlName]="'antPenales'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['antPenales']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="(esUnidadUsada || (esUnidadNueva && esNuevaPagada)) || arregloDocumentosVisibles.includes('antPenales')">
                </app-card-pdf>

                <!----------------------VEHICULOS USADOS PERSONA MORAL------------------------------------------>

                <app-card-pdf [pdfUrl]="pdfUrls['idRepLegal']"
                  [title]="'IDENTIFICACIÓN OFICIAL DEL REPRESENTANTE LEGAL DE LA EMPRESA CON PODER NOTARIAL'"
                  [controlName]="'idRepLegal'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['idRepLegal']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="((esUnidadUsada || esUnidadNueva) && esPersonaMoral) || arregloDocumentosVisibles.includes('idRepLegal')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['actaConstitutiva']" [title]="'ACTA CONSTITUTIVA'"
                  [controlName]="'actaConstitutiva'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['actaConstitutiva']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="((esUnidadUsada || esUnidadNueva )&& esPersonaMoral) || arregloDocumentosVisibles.includes('actaConstitutiva')">
                </app-card-pdf>
                <!----------------------VEHICULOS USADOS PERSONA FISICA------------------------------------------>

                <app-card-pdf [pdfUrl]="pdfUrls['identificacionFisica']"
                  [title]="'IDENTIFICACIÓN OFICIAL CON FOTOGRAFÍA VIGENTE'" [controlName]="'identificacionFisica'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['identificacionFisica']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="((esUnidadUsada || esUnidadNueva) && esPersonaFisica) || arregloDocumentosVisibles.includes('identificacionFisica')">
                </app-card-pdf>

                <!----------------------VEHICULOS NUEVO GENERAL------------------------------------------>
                <!-- Se usa Solicitud SMyT de vehiculo usado-->
                <!-- Se usa comprobante domicilio de vehiculo usado-->
                <app-card-pdf [pdfUrl]="pdfUrls['constanciaFiscalVN']" [title]="'CONSTANCIA DE SITUACION FISCAL'"
                  [controlName]="'constanciaFiscalVN'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['constanciaFiscalVN']"
                  [esModificado]="esModificacion" [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadNueva || arregloDocumentosVisibles.includes('constanciaFiscalVN')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['idPersonaAut']"
                  [title]="'IDENTIFICACION OFICIAL CON FOTOGRAFIA VIGENTE DE LA PERSONA QUE AUTORIZA USO DE DOMICILIO'"
                  [controlName]="'idPersonaAut'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['idPersonaAut']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadNueva || arregloDocumentosVisibles.includes('idPersonaAut')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['domicilioPersonaAut']"
                  [title]="'COMPROBANTE DE DOMICILIO DE LA PERSONA QUE AUTORIZA USO DE DOMICILIO'"
                  [controlName]="'domicilioPersonaAut'" [formGroup]="documentosUnidadForm"
                  [defaultPdfUrl]="defaultPdfUrl" [documentChecked]="documentCheckedStatus['domicilioPersonaAut']"
                  [esModificado]="esModificacion" [esPersonaFisica]="esPersonaFisica"
                  *ngIf="esUnidadNueva || arregloDocumentosVisibles.includes('domicilioPersonaAut')">
                </app-card-pdf>
                <!-- Faltan desglosar elementos de archivo txt-->

                <!----------------------VEHICULOS NUEVO PAGANDO------------------------------------------>

                <app-card-pdf [pdfUrl]="pdfUrls['facturaOriginal']" [title]="'CARTA FACTURA ORIGINAL'"
                  [controlName]="'facturaOriginal'" [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['facturaOriginal']" [esModificado]="esModificacion"
                  [esPersonaFisica]="esPersonaFisica"
                  *ngIf="(esUnidadNueva && esNuevaPagando) || arregloDocumentosVisibles.includes('facturaOriginal')">
                </app-card-pdf>

                <app-card-pdf [pdfUrl]="pdfUrls['facturaSinValor']"
                  [title]="'FACTURA SIN VALOR A FAVOR DEL CONCESIONARIO(A) O EMPRESA'" [controlName]="'facturaSinValor'"
                  [formGroup]="documentosUnidadForm" [defaultPdfUrl]="defaultPdfUrl"
                  [documentChecked]="documentCheckedStatus['facturaSinValor']" [esPersonaFisica]="esPersonaFisica"
                  [esModificado]="esModificacion"
                  *ngIf="(esUnidadNueva && esNuevaPagando) || arregloDocumentosVisibles.includes('facturaOriginal')">
                </app-card-pdf>

                <!----------------------VEHICULOS NUEVO PAGADA------------------------------------------>
                <!-- Se usa factura endosada  de vehiculo usado-->
                <!-- Se usa antecedentes penales de vehiculo usado-->

                <!----------------------VEHICULOS NUEVO PERSONAS MORALES------------------------------------------>
                <!-- Se usa acta constitutiva  de vehiculo usado PM-->
                <!-- Se usa Identificacion Oficial  de vehiculo usado PM-->

                <!----------------------VEHICULOS NUEVO PERSONAS FISICAS------------------------------------------>
                <!-- Se usa Identificacion Oficial  de vehiculo usado PF-->
              </div>
              <br><br>
              <div class="row g-3  mt-3">
                <div class="row g-3 alert terminos shadow-lg p-3 mb-5 rounded">
                  <br />
                  <figure>
                    <blockquote class="blockquote">
                      <p>
                        Acepto que los servicios que a través de este medio se
                        pagan, se sujeten a los requisitos que las disposiciones
                        fiscales y administrativas señalen para tales efectos y
                        que en caso de no cumplir con aquéllos, quede expedito
                        mi derecho para solicitar la devolución de este pago,
                        conforme a derecho corresponda.
                      </p>
                      <hr />
                    </blockquote>
                  </figure>
                  <label>
                    <input formControlName="aceptaTerminos" type="checkbox" class="form-check-input" />
                    He leído y acepto los
                    <a href="#" (click)="openModal(); $event.preventDefault()">
                      Términos y condiciones
                    </a>

                  </label>
                </div>
              </div>
              <div class="d-flex bd-highlight mb-3">
                <button mat-button="" matStepperPrevious matTooltip="Paso anterior" matTooltipPosition="above"
                  class="mat-stepper-previous mat-mdc-tooltip-trigger btn boton-regresar text-white me-auto p-2 bd-highlight mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-hnv-1-5" cdk-describedby-host="hnv-1" type="button">
                  <span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span
                    class="mdc-button__label"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"
                      fill="currentColor" viewBox="0 0 16 17" class="bi bi-caret-left-fill">
                      <path
                        d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                      </path>
                    </svg>
                    Regresar</span><span class="mat-mdc-focus-indicator"></span><span matRipple
                    class="mat-ripple mat-mdc-button-ripple"></span><span
                    class="mat-mdc-button-touch-target"></span></button><button
                  [disabled]="this.documentosUnidadForm.invalid" (click)="registraInformacion()"
                  matTooltip="Siguiente paso" matTooltipPosition="above"
                  class="mat-mdc-tooltip-trigger btn boton-siguiente me-md-2 text-white mdc-button mat-mdc-button mat-unthemed mat-mdc-button-base"
                  aria-describedby="cdk-describedby-message-hnv-1-2" cdk-describedby-host="hnv-1">
                  <span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span
                    class="mdc-button__label">Guardar información </span><span
                    class="mat-mdc-focus-indicator"></span><span matRipple
                    class="mat-ripple mat-mdc-button-ripple"></span><span class="mat-mdc-button-touch-target"></span>
                </button>
              </div>
            </form>
          </mat-step>
        </mat-vertical-stepper>
        <br />
      </div>
    </div>
  </div>
</div>
<div *ngIf="cargarSpinner" class="blur-container">
  <div class="spinner-container">
    <img src="assets/images/Logotipo.png" alt="Spinner" class="rotating-image">
    <p class="loading-text">Cargando...</p>
  </div>
</div>
<app-footer></app-footer>